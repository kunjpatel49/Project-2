<!DOCTYPE html>
<html>

<head>
  <!--   Search bar styles     -->
  <title>Teaser</title>
  <div class="jumbotron text-center bg-white" style="background-image: url('https://cdn.pixabay.com/photo/2016/09/22/10/44/banner-1686943__480.jpg')">
    <h1 style="font-family:'Times New Roman', Times, serif; color: black">Teaser</h1>
  </div>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <link rel='icon' href='favicon.ico' type='image/x-icon' />
  <style>
    body {
      background-image: url("https://d2v9y0dukr6mq2.cloudfront.net/video/thumbnail/GfRLKaE/videoblocks-wedding-particles-background-animation-4k-hd_bo7mtc0az_thumbnail-full01.png");
      background-repeat:no-repeat;
      background-size:cover;
      font-family:"Times New Roman", Times, serif;
    }
    #map {
      height: 400px;
      /* The height is 400 pixels */
      width: 100%;
      /* The width is the width of the web page */
    }
  </style>

</head>


<body>


  <div class="content" style="text-align: center;">
    <h3 style="color:lightblue">Search By Park Name</h3>
    <input type="text" placeholder="Park" id="names" style="display: inline">
    <form style="color:lightblue">
      <input type="checkbox" id="upcoming" value="new" checked>Show Upcoming Shows Only
      <br>
    </form>
    <button id="txtSearch">
      Search
    </button>
  </div>
  <div class="content" style="text-align: center;">
    <h3 style="color:lightblue">Search By Movie Name</h3>
    <input type="text" placeholder="What's on your mind" id="movies" style="display: inline">
    <button id="titleSearch">
      Search
    </button>
  </div>
  <div class="content" style="text-align: center;">
    <form action="action.php" style="color:lightblue">
      <input type="checkbox" id="day1" value="Sun">Sunday's Shows
      <br>
      <input type="checkbox" id="day2" value="Mon">Monday's Shows
      <br>
      <input type="checkbox" id="day3" value="Tue">Tuesday's Shows
      <br>
      <input type="checkbox" id="day4" value="Wed">Wednesday's Shows
      <br>
      <input type="checkbox" id="day5" value="Thu">Thursday's Shows
      <br>
      <input type="checkbox" id="day6" value="Fri">Friday's Shows
      <br>
      <input type="checkbox" id="day7" value="Sat">Saturday's Shows
      <br>
    </form>
    <button id="daySearch">
      Search by Day
    </button>
  </div>

  <br>
  <div class="tableC" style="text-align: center;">
    <ul class="list-group">
    </ul>
  </div>




  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
  </script>

  <script>
    var d = new Date();
    var temp;

    function getData(searchQuery, searchType) {
      $.get(endpoint + searchQuery + $(searchType).val(), function(response) {
        $.each(response, function(i, v) {
          temp = new Date(v.date);
          if(v.day == $("#day1").val() && $('#day1').prop('checked')) {
            if($('#upcoming').prop('checked') && temp >= d) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            } else {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            }
          } else if(v.day == $("#day2").val() && $('#day2').prop('checked')) {
            if($('#upcoming').prop('checked') && temp >= d) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            } else {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            }
          } else if(v.day == $("#day3").val() && $('#day3').prop('checked')) {
            if($('#upcoming').prop('checked') && temp >= d) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            } else {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            }
          } else if(v.day == $("#day4").val() && $('#day4').prop('checked')) {
            if($('#upcoming').prop('checked') && temp >= d) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "nesday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            } else {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "nesday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            }
          } else if(v.day == $("#day5").val() && $('#day5').prop('checked')) {
            temp = new Date(v.date);
            if($('#upcoming').prop('checked') && temp >= d) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "rsday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            } else {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "rsday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            }
          } else if(v.day == $("#day6").val() && $('#day6').prop('checked')) {
            if($('#upcoming').prop('checked') && temp >= d) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            } else {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            }
          } else if(v.day == $("#day7").val() && $('#day7').prop('checked')) {
            if($('#upcoming').prop('checked') && temp >= d) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "urday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            } else {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "urday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<button type='button'onclick='document.getElementById('map').innerHTML = Date()'>Click me to display Date and Time</button></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
              count = 1;
            }
          }
          // show all available SHOWS in that park if no prefered day selected
          else if($(":checkbox:checked").length == 0 && !$('#upcoming').prop('checked')) {
            count = 1;
            var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<button type='button'onclick='document.getElementById('map').innerHTML = Date()'>Click me to display Date and Time</button></li>" + "<br>" + "</div>";
            $("ul").append(markup);
            createMarkers(v);
            count = 1;
          }
        });
        if(count == 0) {
          alert("No Shows Available on this day!");
        }
      });
    }

    function hideScreens() {
      $(".content").hide();
    }
    $(".tableC").hide();
    var endpoint = "https://data.cityofchicago.org/resource/7piw-z6r6.json";
    var count = 0;
    $(document).ready(function() {
      $("#txtSearch").on("click", function() {
        hideScreens();
        $(".tableC").show();
        getData('?park=', '#names');
      });
    });
     // Search by day
    var d = new Date();
    var temp;
    $(document).ready(function() {
      $("#daySearch").on("click", function() {
        hideScreens();
        $(".tableC").show();
        if($('#day1').prop('checked')) {
          $.get(endpoint + "?day=" + $("#day1").val(), function(response) {
            $.each(response, function(i, v) {
              temp = new Date(v.date);
              if($('#upcoming').prop('checked') && temp >= d) {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
                count = 1;
              } else {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
              }
            });
          });
        }
        if($('#day2').prop('checked')) {
          $.get(endpoint + "?day=" + $("#day2").val(), function(response) {
            $.each(response, function(i, v) {
              temp = new Date(v.date);
              if($('#upcoming').prop('checked') && temp >= d) {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                count = 1;
                createMarkers(v);
              } else {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
              }
            });
          });
        }
        if($('#day3').prop('checked')) {
          $.get(endpoint + "?day=" + $("#day3").val(), function(response) {
            $.each(response, function(i, v) {
              temp = new Date(v.date);
              if($('#upcoming').prop('checked') && temp >= d) {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "sday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
                count = 1;
              } else {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "sday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
              }
            });
          });
        }
        if($('#day4').prop('checked')) {
          $.get(endpoint + "?day=" + $("#day4").val(), function(response) {
            $.each(response, function(i, v) {
              temp = new Date(v.date);
              if($('#upcoming').prop('checked') && temp >= d) {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "nesday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
                count = 1;
              } else {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "nesday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
              }
            });
          });
        }
        if($('#day5').prop('checked')) {
          $.get(endpoint + "?day=" + $("#day5").val(), function(response) {
            $.each(response, function(i, v) {
              temp = new Date(v.date);
              if($('#upcoming').prop('checked') && temp >= d) {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "rsday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
                count = 1;
              } else {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "rsday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
              }
            });
          });
        }
        if($('#day6').prop('checked')) {
          $.get(endpoint + "?day=" + $("#day6").val(), function(response) {
            $.each(response, function(i, v) {
              temp = new Date(v.date);
              if($('#upcoming').prop('checked') && temp >= d) {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
                count = 1;
              } else {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "day" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
              }
            });
          });
        }
        if($('#day7').prop('checked')) {
          $.get(endpoint + "?day=" + $("#day7").val(), function(response) {
            $.each(response, function(i, v) {
              temp = new Date(v.date);
              if($('#upcoming').prop('checked') && temp >= d) {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "urday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
                count = 1;
              } else {
                var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "urday" + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<a href= '_maps.html' >Directions</a></li>" + "<br>" + "</div>";
                $("ul").append(markup);
                createMarkers(v);
              }
            });
          });
        }
        if(!$('#upcoming').prop('checked') && $(":checkbox:checked").length == 0) {
          $.get(endpoint, function(response) {
            $.each(response, function(i, v) {
              var markup = "<div class=maps>" + "<li class='list-group-item'>" + v.day + "<br>" + v.title + "<br>" + v.park + "<br>" + v.park_phone + "<br>" + "<button type='button' onclick='hideResults()'>Directions</button></li>" + "<br>" + "</div>";
              $("ul").append(markup);
              createMarkers(v);
            });
          });
        }
      });
    });
     // Search by Movie Title and Day
    $(document).ready(function() {
      $("#titleSearch").on("click", function() {
        hideScreens();
        $(".tableC").show();
        getData('?title=', '#movies');
      });
    });
     // Initialize and add the map
    var map;

    function initMap() {
      // The location of Uluru
      var uluru = {
        lat: 41.8781,
        lng: -87.6298
      };
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 11,
        center: uluru
      });
      // The marker, positioned at Uluru
    }

    function createMarkers(record) {
      var loc = {
        lat: parseFloat(record.location.latitude),
        lng: parseFloat(record.location.longitude)
      };
      console.log(loc);
      if(record.cc == "Y"){
         var cc = "Closed Captioned Movie"
         }
      else{
        var cc = "Not Closed-Captioned"
      }
      var currDate = record.date;
      currDate = currDate.split("T")[0];
      var contentString = "<div class=info style= text-align: center>" + "<h3>" + record.title + " at " + record.park + "</h3>" + 
          "<p> Address: " + record.park_address + 
          "<br>Date: " + currDate +
          "<br>Rating: " + record.rating +
          "<br>CC: " + cc +
          "</p>" + "</div>";
      var infowindow = new google.maps.InfoWindow({
        content: contentString
      });
      var marker = new google.maps.Marker({
        position: loc,
        map: map,
        title: record.title
      });
      marker.addListener('click', function() {
        infowindow.open(map, marker);
      });
    }
    
    function hideResults(){
        $(".maps").hide();
    }
  </script>
  <div id="map"></div>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB0UFLZGzVPnpsL404NoKqh0WdR996qPNc&callback=initMap">
  </script>




</body>

</html>
